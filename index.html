<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pok√©dex e Game</title>
<style>
body { margin:0; font-family:Arial,sans-serif; background-color:#fff; display:flex; }

/* SIDEBAR */
.sidebar {
  width:200px;
  background:#fff;
  color:#000;
  height:100vh;
  position:fixed;
  left:-220px;
  top:0;
  padding:20px;
  box-sizing:border-box;
  overflow-y:auto;
  z-index:1000;
  border-radius:0 10px 10px 0;
  border:2px solid #000;
  transition:left 0.3s;
}
.sidebar.active { left:0; }
.sidebar h2 { margin-top:0; font-size:18px; }
.sidebar button {
  margin:5px 0;
  padding:8px 10px;
  width:100%;
  border:none;
  border-radius:10px;
  cursor:pointer;
  background:#fff;
  color:#000;
  font-weight:bold;
  box-shadow:0 2px 5px rgba(0,0,0,0.2);
  border:2px solid #000;
}

/* MENU MOBILE */
.menu-btn {
  display:none;
  position:fixed;
  top:10px;
  left:10px;
  z-index:1100;
  font-size:20px;
  background:#fff;
  border:2px solid #000;
  border-radius:10px;
  padding:5px 10px;
  cursor:pointer;
  font-weight:bold;
}

/* CONTENT */
.content { flex:1; display:flex; flex-direction:column; padding-left:200px; }
header { display:flex; align-items:center; padding:10px 20px; font-size:24px; font-weight:bold; }
header #page-title { margin-left:1.3cm; }

.search-container { display:flex; justify-content:center; padding:10px 20px; }
.search-container input {
  width:90%; max-width:500px;
  padding:10px 15px;
  border:2px solid #000;
  border-radius:5px;
  font-size:16px;
}

/* GRID */
.pokemon-container {
  display:grid;
  grid-template-columns:repeat(3, 1fr);
  gap:30px;
  padding:10px;
}

@media(max-width:900px){
  .pokemon-container { grid-template-columns:repeat(2,1fr); }
  .content { padding-left:0; }
}
@media(max-width:600px){
  .pokemon-container { grid-template-columns:1fr; }
  .menu-btn { display:block; }
}

/* CARDS */
.pokemon-card, .pokedex-card {
  height:auto;
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:10px;
  box-sizing:border-box;
  color:#fff;
  font-weight:bold;
}

.pokemon-card { cursor:pointer; }
.pokedex-card { pointer-events:none; }

.pokemon-img { width:100px; height:100px; }

.type-btn, .action-btn {
  margin:3px;
  padding:5px 8px;
  border-radius:8px;
  border:2px solid #000;
  background:#fff;
  cursor:pointer;
  font-size:12px;
}

/* FOR√áAR SIDEBAR PC */
@media(min-width:901px){
  .sidebar { left:0 !important; }
  .content { padding-left:220px; }
}
</style>
</head>

<body>

<button class="menu-btn" id="menu-btn">‚ò∞</button>

<div class="sidebar" id="sidebar">
  <h2>Menu</h2>
  <button id="start-game-btn">Start Game</button>
  <button id="pokedex-btn" style="display:none;">Pokedex</button>
  <button id="my-pokemon-btn" style="display:none;">Pok√©mons</button>
</div>

<div class="content">
<header>
<button class="menu-btn" style="visibility:hidden;"></button>
<span id="page-title">Pok√©Dex</span>
</header>

<div class="search-container" id="search-container">
<input type="text" id="search" placeholder="üîç Qual Pokemon voc√™ esta procurando?">
</div>

<div class="pokemon-container" id="pokemon-container"></div>
</div>

<script>
const container=document.getElementById('pokemon-container');
const searchInput=document.getElementById('search');
const startGameBtn=document.getElementById('start-game-btn');
const pokedexBtn=document.getElementById('pokedex-btn');
const myPokemonBtn=document.getElementById('my-pokemon-btn');
const searchContainer=document.getElementById('search-container');
const sidebar=document.getElementById('sidebar');
const menuBtn=document.getElementById('menu-btn');
const pageTitle=document.getElementById('page-title');

const typeColors={ normal:"#C0B588", fire:"#F08030", water:"#6A9BF0", electric:"#F8D030",
grass:"#8FCF70", ice:"#A0E0E0", fighting:"#D06060", poison:"#B070B0",
ground:"#E2D080", flying:"#B0A0F0", psychic:"#F07090", bug:"#B0C860",
rock:"#C0B090", ghost:"#9070B0", dragon:"#8058F8", dark:"#807070",
steel:"#C0C0D0", fairy:"#F0A0B0" };

let currentView='pokedex';
let totalPokemons=386;
let allPokemons=[];
let selectedPokemon=null;
let wildPokemon=null;

const pokeballs={
pokeball:{bonus:10},
great:{bonus:20},
ultra:{bonus:30}
};
let selectedBall="pokeball";

menuBtn.onclick=()=>sidebar.classList.toggle('active');
function capitalize(str){return str.charAt(0).toUpperCase()+str.slice(1);}
async function fetchPokemon(id){
const res=await fetch(`https://pokeapi.co/api/v2/pokemon/${id}`);
return await res.json();
}
function clearContainer(){container.innerHTML='';}

/* ===== CAPTURA ===== */
function startEncounter(pokemon){
wildPokemon={
data:pokemon,
hp:Math.floor(Math.random()*50)+50,
rarity:Math.random()<0.1?"raro":"comum",
fleeChance:5
};
showEncounter();
}

function showEncounter(){
clearContainer();
const p=wildPokemon.data;
const card=document.createElement('div');
card.className="pokemon-card";
card.style.backgroundColor=typeColors[p.types[0].type.name];
card.style.flexDirection="column";

card.innerHTML=`
<div>${capitalize(p.name)}</div>
<div>HP: ${wildPokemon.hp}%</div>
<img class="pokemon-img" src="${p.sprites.other['official-artwork'].front_default}">
<div>
<button class="action-btn" onclick="weaken()">Enfraquecer</button>
<button class="action-btn" onclick="capture()">Capturar</button>
<button class="action-btn" onclick="flee()">Fugir</button>
</div>
<div>
<button class="type-btn" onclick="selectedBall='pokeball'">Pok√©ball</button>
<button class="type-btn" onclick="selectedBall='great'">Great</button>
<button class="type-btn" onclick="selectedBall='ultra'">Ultra</button>
</div>
`;
container.appendChild(card);
}

function weaken(){
wildPokemon.hp=Math.max(10,wildPokemon.hp-10);
wildPokemon.fleeChance+=10;
showEncounter();
}

function capture(){
let base=wildPokemon.rarity==="raro"?20:40;
let chance=base+pokeballs[selectedBall].bonus+(100-wildPokemon.hp)*0.3;
if(Math.random()*100<chance){
selectedPokemon=wildPokemon.data;
showSelectedPokemonIVs();
}else{
wildPokemon.fleeChance+=10;
if(Math.random()*100<wildPokemon.fleeChance){
clearContainer();
container.innerHTML="<p>üí® O Pok√©mon fugiu!</p>";
}else showEncounter();
}
}

function flee(){
clearContainer();
container.innerHTML="<p>Voc√™ fugiu.</p>";
}

/* ===== ORIGINAL ===== */
function createPokemonCard(p){
const c=document.createElement('div');
c.className="pokemon-card";
c.style.backgroundColor=typeColors[p.types[0].type.name];
c.innerHTML=`<div>${capitalize(p.name)}</div><img class="pokemon-img" src="${p.sprites.other['official-artwork'].front_default}">`;
c.onclick=()=>startEncounter(p);
container.appendChild(c);
}

function createPokedexCard(p){
const c=document.createElement('div');
c.className="pokedex-card";
c.style.backgroundColor=typeColors[p.types[0].type.name];
c.innerHTML=`<div>${capitalize(p.name)}</div><img class="pokemon-img" src="${p.sprites.other['official-artwork'].front_default}">`;
container.appendChild(c);
}

async function loadAllPokemons(){
for(let i=1;i<=totalPokemons;i++){
const p=await fetchPokemon(i);
allPokemons.push(p);
if(currentView==='pokedex')createPokedexCard(p);
}
}

function showSelectedPokemonIVs(){
clearContainer();
container.innerHTML=`<div class="pokemon-card" style="background:#444;flex-direction:column;">
<h3>${capitalize(selectedPokemon.name)}</h3>
<p>IV Total: ${Math.floor(Math.random()*40+60)}%</p>
</div>`;
}

searchInput.oninput=()=>{
container.innerHTML='';
allPokemons.filter(p=>p.name.includes(searchInput.value.toLowerCase()))
.forEach(p=>createPokedexCard(p));
};

startGameBtn.onclick=()=>{
currentView="game";
pageTitle.textContent="Pok√©mons";
searchContainer.style.display="none";
clearContainer();
[1,4,7,152,155,158,252,255,258].forEach(id=>{
createPokemonCard(allPokemons.find(p=>p.id===id));
});
};

loadAllPokemons();
</script>
</body>
    </html>
