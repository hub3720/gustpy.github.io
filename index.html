<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pok√©dex e Game</title>

<style>
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:#fff;
  display:flex;
}

/* SIDEBAR */
.sidebar{
  width:200px;
  background:#fff;
  color:#000;
  height:100vh;
  position:fixed;
  left:-220px;
  top:0;
  padding:20px;
  box-sizing:border-box;
  border:2px solid #000;
  border-radius:0 10px 10px 0;
  transition:left .3s;
  z-index:1000;
}
.sidebar.active{ left:0; }
.sidebar button{
  width:100%;
  margin:5px 0;
  padding:8px;
  border:2px solid #000;
  background:#fff;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
}

/* MENU BTN */
.menu-btn{
  display:none;
  position:fixed;
  top:10px;
  left:10px;
  z-index:1100;
  font-size:20px;
  padding:5px 10px;
  border:2px solid #000;
  border-radius:10px;
  background:#fff;
}

/* CONTENT */
.content{
  flex:1;
  padding-left:220px;
}
header{
  padding:10px 20px;
  font-size:24px;
  font-weight:bold;
}

.search-container{
  display:flex;
  justify-content:center;
}
.search-container input{
  width:90%;
  max-width:500px;
  padding:10px;
  border:2px solid #000;
  border-radius:5px;
}

/* GRID */
.pokemon-container{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:20px;
  padding:15px;
}

/* CARD */
.pokemon-card,.pokedex-card{
  height:130px;
  border-radius:10px;
  padding:10px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  color:#fff;
}

.pokemon-img{
  width:90px;
}

.pokemon-info{
  display:flex;
  flex-direction:column;
}

.types{
  display:flex;
  gap:5px;
  margin-top:3px;
}
.types img{ width:14px; }

/* RESPONSIVO */
@media(max-width:900px){
  .pokemon-container{ grid-template-columns:repeat(2,1fr); }
  .content{ padding-left:0; }
  .menu-btn{ display:block; }
}
@media(max-width:600px){
  .pokemon-container{ grid-template-columns:1fr; }
}
@media(min-width:901px){
  .sidebar{ left:0!important; }
}
</style>
</head>

<body>

<button class="menu-btn" id="menu-btn">‚ò∞</button>

<div class="sidebar" id="sidebar">
  <button id="start-game-btn">Start Game</button>
  <button id="pokedex-btn" style="display:none">Pok√©dex</button>
  <button id="my-pokemon-btn" style="display:none">Pok√©mons</button>
</div>

<div class="content">
<header><span id="page-title">Pok√©Dex</span></header>

<div class="search-container" id="search-container">
<input id="search" placeholder="üîç Qual Pok√©mon voc√™ procura?">
</div>

<div class="pokemon-container" id="pokemon-container"></div>
</div>

<script>
const container=document.getElementById("pokemon-container");
const sidebar=document.getElementById("sidebar");
const menuBtn=document.getElementById("menu-btn");
const pageTitle=document.getElementById("page-title");
const searchInput=document.getElementById("search");
const searchContainer=document.getElementById("search-container");

const startBtn=document.getElementById("start-game-btn");
const pokedexBtn=document.getElementById("pokedex-btn");
const myPokemonBtn=document.getElementById("my-pokemon-btn");

const typeColors={
 fire:"#F08030",water:"#6A9BF0",grass:"#8FCF70",electric:"#F8D030",
 normal:"#C0B588",psychic:"#F07090",ice:"#A0E0E0",dragon:"#8058F8"
};

let allPokemons=[];
let myPokemons=[];

/* MENU */
menuBtn.onclick=()=>sidebar.classList.toggle("active");

/* API */
const fetchPokemon=async(id)=>(await fetch(`https://pokeapi.co/api/v2/pokemon/${id}`)).json();
const cap=s=>s.charAt(0).toUpperCase()+s.slice(1);

/* CREATE TYPES */
const renderTypes=p=>`
<div class="types">
 ${p.types.map(t=>`<img src="https://raw.githubusercontent.com/duiker101/pokemon-type-svg-icons/master/icons/${t.type.name}.svg">`).join("")}
</div>`;

/* POKEDEX CARD */
function createPokedexCard(p){
 const c=document.createElement("div");
 c.className="pokedex-card";
 c.style.background=typeColors[p.types[0].type.name]||"#777";
 c.innerHTML=`
  <div class="pokemon-info">
   <strong>${cap(p.name)}</strong>
   ${renderTypes(p)}
  </div>
  <img class="pokemon-img" src="${p.sprites.other['official-artwork'].front_default}">
 `;
 container.appendChild(c);
}

/* GAME CARD */
function createGameCard(p){
 const c=document.createElement("div");
 c.className="pokemon-card";
 c.style.background=typeColors[p.types[0].type.name];
 c.innerHTML=`
  <div class="pokemon-info">
   <strong>${cap(p.name)}</strong>
   <small>Lv ${p.level}</small>
   ${renderTypes(p)}
  </div>
  <img class="pokemon-img" src="${p.sprite}">
 `;
 container.appendChild(c);
}

/* LOAD */
async function load(){
 for(let i=1;i<=151;i++) allPokemons.push(await fetchPokemon(i));
 renderPokedex();
}

/* POKEDEX */
function renderPokedex(){
 pageTitle.textContent="Pok√©Dex";
 searchContainer.style.display="flex";
 container.innerHTML="";
 allPokemons.forEach(createPokedexCard);
}

/* SEARCH */
searchInput.oninput=()=>{
 container.innerHTML="";
 allPokemons.filter(p=>p.name.includes(searchInput.value.toLowerCase()))
 .forEach(createPokedexCard);
};

/* START GAME */
startBtn.onclick=()=>{
 container.innerHTML="";
 pageTitle.textContent="Escolha seu Inicial";

 [1,4,7].forEach(id=>{
  const base=allPokemons.find(p=>p.id===id);

  const starter={
   name:base.name,
   level:1,
   ivs:{hp:15,atk:15,def:15,spa:15,spd:15,spe:15},
   types:base.types,
   sprite:base.sprites.other['official-artwork'].front_default
  };

  const c=document.createElement("div");
  c.className="pokemon-card";
  c.style.background=typeColors[base.types[0].type.name];
  c.innerHTML=`
   <strong>${cap(base.name)}</strong>
   ${renderTypes(base)}
   <img class="pokemon-img" src="${starter.sprite}">
  `;

  c.onclick=()=>{
   myPokemons.push(starter);
   startBtn.style.display="none";
   pokedexBtn.style.display="block";
   myPokemonBtn.style.display="block";
   showMyPokemons();
  };

  container.appendChild(c);
 });
};

/* CAPTURE */
function tryCapture(p){
 const chance=0.6 - (p.id/300);
 return Math.random()<chance;
}

/* WILD */
function openWild(){
 const wild=allPokemons[Math.floor(Math.random()*allPokemons.length)];
 container.innerHTML=`
  <img src="${wild.sprites.other['official-artwork'].front_default}" width="250">
  <img id="ball" src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png" width="60">
 `;
 document.getElementById("ball").onclick=()=>{
  if(tryCapture(wild)){
   myPokemons.push({
    name:wild.name,
    level:Math.floor(Math.random()*5)+2,
    ivs:null,
    types:wild.types,
    sprite:wild.sprites.other['official-artwork'].front_default
   });
   alert("Capturado!");
  }else alert("Escapou!");
 };
}

/* MEUS POKEMONS */
function showMyPokemons(){
 pageTitle.textContent="Meus Pok√©mons";
 container.innerHTML="";
 myPokemons.forEach(createGameCard);
}

/* MENU */
pokedexBtn.onclick=renderPokedex;
myPokemonBtn.onclick=showMyPokemons;

load();
</script>
</body>
</html>
