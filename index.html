<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pok√©dex e Game</title>
<style>
body { margin:0; font-family:Arial,sans-serif; background-color:#fff; display:flex; }

/* SIDEBAR */
.sidebar {
  width:200px;
  background:#f1f1f1;
  height:100vh;
  position:fixed;
  left:0;
  top:0;
  padding:20px;
  box-sizing:border-box;
  overflow-y:auto;
}
.sidebar h2 { margin-top:0; font-size:18px; }
.sidebar button { margin:5px 0; padding:8px 10px; width:100%; border:none; border-radius:5px; cursor:pointer; }

/* CONTENT */
.content { margin-left:200px; flex:1; display:flex; flex-direction:column; }
header { padding:10px 20px; font-size:24px; font-weight:bold; color:#000; }
.search-container { display:flex; justify-content:center; padding:10px 20px; }
.search-container input {
  width:90%; max-width:500px;
  padding:10px 15px;
  border:2px solid #000;
  border-radius:10px;
  font-size:16px;
  outline:none;
}
.search-container input::placeholder { color:#555; }

/* POKEMON GRID */
.pokemon-container {
  display:grid;
  grid-template-columns:repeat(3, 1fr);
  gap:25px; /* espa√ßo maior para sobreposi√ß√£o */
  padding:10px;
}
@media(max-width:900px){ .pokemon-container { grid-template-columns:repeat(2,1fr); } }
@media(max-width:600px){ .pokemon-container { grid-template-columns:1fr; } .content { margin-left:0; } }

/* POKEMON CARD */
.pokemon-card {
  width:100%;
  height:120px;
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  position:relative;
  color:#fff;
  font-weight:bold;
  padding:10px;
  box-sizing:border-box;
  cursor:pointer;
  overflow:visible;
}
.pokemon-card img.pokemon-img {
  width:100px;
  height:100px;
  position:relative;
  top:-15px;
}
.pokemon-info { display:flex; flex-direction:column; align-items:flex-start; justify-content:center; }
.pokemon-name { margin:0; font-size:16px; text-align:left; }
.pokemon-types { display:flex; gap:5px; margin-top:5px; }
.pokemon-type-img { width:15px; height:15px; }

@media (max-width:600px) {
  .pokemon-card { height:100px; padding:5px; }
  .pokemon-card img.pokemon-img { width:70px; height:70px; top:-10px; }
  .pokemon-type-img { width:12px; height:12px; }
}
</style>
</head>
<body>

<div class="sidebar" id="sidebar">
  <h2>Menu</h2>
  <button id="start-game-btn">Start Game</button>
  <button id="pokedex-btn" style="display:none;">Pokedex</button>
  <button id="my-pokemon-btn" style="display:none;">Pokemons</button>
</div>

<div class="content">
  <header>Pok√©Dex</header>
  <div class="search-container" id="search-container">
    <input type="text" id="search" placeholder="üîç Qual Pokemon voc√™ esta procurando?">
  </div>
  <div class="pokemon-container" id="pokemon-container"></div>
</div>

<script>
const container=document.getElementById('pokemon-container');
const searchInput=document.getElementById('search');
const startGameBtn=document.getElementById('start-game-btn');
const pokedexBtn=document.getElementById('pokedex-btn');
const myPokemonBtn=document.getElementById('my-pokemon-btn');
const searchContainer=document.getElementById('search-container');

const typeColors={ normal:"#A8A77A", fire:"#EE8130", water:"#6390F0", electric:"#F7D02C",
  grass:"#7AC74C", ice:"#96D9D6", fighting:"#C22E28", poison:"#A33EA1",
  ground:"#E2BF65", flying:"#A98FF3", psychic:"#F95587", bug:"#A6B91A",
  rock:"#B6A136", ghost:"#735797", dragon:"#6F35FC", dark:"#705746",
  steel:"#B7B7CE", fairy:"#D685AD" };

let currentView='pokedex'; 
const totalPokemons=386; 
const allPokemons=[];
let selectedPokemon=null;

function upper(str){ return str.toUpperCase(); }
async function fetchPokemon(id){ const res=await fetch(`https://pokeapi.co/api/v2/pokemon/${id}`); return await res.json(); }

function clearContainer(){ container.innerHTML=''; }

function createPokemonCard(pokemon, showDetails=true, onSelect=null){
  const card=document.createElement('div');
  const primaryType=pokemon.types[0].type.name;
  card.classList.add('pokemon-card');
  card.style.backgroundColor=typeColors[primaryType]||"#777";

  const infoDiv=document.createElement('div');
  infoDiv.classList.add('pokemon-info');

  const name=document.createElement('div');
  name.classList.add('pokemon-name');
  name.textContent=upper(pokemon.name);
  infoDiv.appendChild(name);

  const typesContainer=document.createElement('div');
  typesContainer.classList.add('pokemon-types');
  pokemon.types.forEach(t=>{
    const img=document.createElement('img');
    img.src=`https://raw.githubusercontent.com/duiker101/pokemon-type-svg-icons/master/icons/${t.type.name}.svg`;
    img.classList.add('pokemon-type-img');
    typesContainer.appendChild(img);
  });
  infoDiv.appendChild(typesContainer);

  card.appendChild(infoDiv);

  const img=document.createElement('img');
  img.src=pokemon.sprites.other['official-artwork'].front_default;
  img.alt=pokemon.name;
  img.classList.add('pokemon-img');
  card.appendChild(img);

  if(showDetails){
    card.addEventListener('click',()=>{ selectedPokemon=pokemon; clearContainer(); showSelectedPokemon(); });
  } else if(onSelect){
    card.addEventListener('click',()=>{ selectedPokemon=pokemon; myPokemonBtn.style.display='block'; startGameBtn.style.display='none'; showSelectedPokemon(); });
  }

  container.appendChild(card);
}

// CARREGA TODOS OS POKEMONS
async function loadAllPokemons(){
  for(let i=1;i<=totalPokemons;i++){
    const p=await fetchPokemon(i);
    allPokemons.push(p);
    if(currentView==='pokedex') createPokemonCard(p,true);
  }
}

// MOSTRAR POKEMON SELECIONADO COM IVs
function showSelectedPokemon(){
  clearContainer();
  const card=document.createElement('div');
  const primaryType=selectedPokemon.types[0].type.name;
  card.classList.add('pokemon-card');
  card.style.backgroundColor=typeColors[primaryType];
  card.style.flexDirection='column';
  card.style.height='auto';
  card.style.padding='10px';
  card.style.cursor='default';

  // Level
  const levelDiv=document.createElement('div');
  levelDiv.textContent=`Level: 1`; 
  levelDiv.style.fontSize='16px';
  levelDiv.style.fontWeight='bold';
  levelDiv.style.marginBottom='5px';
  card.appendChild(levelDiv);

  // Imagem
  const img=document.createElement('img');
  img.src=selectedPokemon.sprites.other['official-artwork'].front_default;
  img.alt=selectedPokemon.name;
  img.classList.add('pokemon-img');
  card.appendChild(img);

  // Nome
  const name=document.createElement('div');
  name.textContent=upper(selectedPokemon.name);
  name.style.margin='5px 0';
  name.style.fontSize='16px';
  card.appendChild(name);

  // Tipos
  const typesContainer=document.createElement('div');
  typesContainer.style.display='flex';
  typesContainer.style.gap='5px';
  selectedPokemon.types.forEach(t=>{
    const imgType=document.createElement('img');
    imgType.src=`https://raw.githubusercontent.com/duiker101/pokemon-type-svg-icons/master/icons/${t.type.name}.svg`;
    imgType.style.width='20px';
    imgType.style.height='20px';
    typesContainer.appendChild(imgType);
  });
  card.appendChild(typesContainer);

  // IVs detalhados e percentual total
  const ivContainer=document.createElement('div');
  ivContainer.style.marginTop='10px';
  ivContainer.style.fontSize='12px';
  ivContainer.style.textAlign='left';

  const stats=['HP','Attack','Defense','Sp. Atk','Sp. Def','Speed'];
  const ivMax=30;
  const ivs=stats.map(stat=>15); 
  const totalIV=ivs.reduce((a,b)=>a+b,0);

  stats.forEach((stat,index)=>{
    const ivValue=ivs[index];
    const p=document.createElement('p');
    p.textContent=`${stat}: ${ivValue}`;
    ivContainer.appendChild(p);
  });

  const totalPercent=document.createElement('p');
  totalPercent.style.fontWeight='bold';
  totalPercent.textContent=`IV Percentual Total: ${Math.round((totalIV/(ivMax*stats.length))*100)}%`;
  ivContainer.appendChild(totalPercent);

  card.appendChild(ivContainer);
  container.appendChild(card);
}

// SEARCH
searchInput.addEventListener('input',()=>{
  const value=searchInput.value.toLowerCase();
  clearContainer();
  allPokemons.filter(p=>p.name.includes(value)).forEach(p=>createPokemonCard(p,true));
});

// START GAME
startGameBtn.addEventListener('click',async()=>{
  currentView='game';
  pokedexBtn.style.display='block';
  startGameBtn.style.display='none';
  myPokemonBtn.style.display='none';
  searchContainer.style.display='none';
  clearContainer();

  const startersIds=[1,4,7,152,155,158,252,255,258]; 
  for(const id of startersIds){
    const p=allPokemons.find(x=>x.id===id);
    createPokemonCard(p,false,(pokemon)=>{
      selectedPokemon=p; 
      myPokemonBtn.style.display='block'; 
      startGameBtn.style.display='none'; 
      showSelectedPokemon();
    });
  }
});

// VOLTAR PARA POKEDEX
pokedexBtn.addEventListener('click',()=>{
  currentView='pokedex';
  pokedexBtn.style.display='none';
  myPokemonBtn.style.display='block';
  startGameBtn.style.display='none';
  searchContainer.style.display='flex';
  clearContainer();
  allPokemons.forEach(p=>createPokemonCard(p,true));
});

// VOLTAR PARA POKEMONS SELECIONADO
myPokemonBtn.addEventListener('click',()=>{
  if(selectedPokemon){
    currentView='game';
    clearContainer();
    showSelectedPokemon();
    pokedexBtn.style.display='block';
    startGameBtn.style.display='none';
  }
});

// INICIALIZA
loadAllPokemons();
</script>

</body>
  </html>
